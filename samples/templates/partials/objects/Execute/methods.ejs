    <%# EJS DOCUMENTATION: https://ejs.co/ %>
    COMMENT: ====================================================================================
    COMMENT: CUSTOM METHODS FOR Execute OBJECT
    COMMENT: ====================================================================================
    
    COMMENT: Sets the component to be executed.
    METHOD setComponent(componentModel: BaseComponent)
        
        PURPOSE: Attaches a component model instance and formats it for server transmission
        
        PARAMETERS:
            componentModel: A component model instance with all required properties set
        
        WHY: Execute objects wrap components so they can be batched and sent together
        
        BEHAVIOR:
            COMMENT: Store reference to the component
            SET this.componentModel TO componentModel
            
            COMMENT: Extract and store the component name
            SET this.component TO componentModel.objectName
            
            COMMENT: Store parameters using the best available serialization method
            IF componentModel has method prepareForJson THEN
                SET this.parameters TO componentModel.prepareForJson()
            ELSE IF componentModel has method toObject THEN
                SET this.parameters TO componentModel.toObject()
            ELSE
                SET this.parameters TO null
            END IF
            
            COMMENT: Note: Encryption for secure components is handled in prepareForJson()
    END METHOD
    
    COMMENT: Converts this Execute object to a JSON-compatible format.
    COMMENT: Handles encryption for secure components.
    COMMENT: Overrides BaseObject.prepareForJson()
    METHOD prepareForJson(): Object
        
        PURPOSE: Serializes this Execute object for sending to the API
        
        RETURNS: A plain object that can be converted to JSON
        
        WHY: The API needs Execute objects in a specific format. Secure components
             (like medal unlocks) must be encrypted to prevent cheating.
        
        BEHAVIOR:
            COMMENT: Build the basic execute object structure
            CREATE requestObject WITH {
                component: this.component,
                parameters: this.parameters
            }
            
            COMMENT: If this component requires encryption, wrap it in a secure object
            IF this.componentModel is not null AND this.componentModel.isSecure is true THEN
                IF this.core is null THEN
                    THROW error "Core is required for encrypting secure components"
                END IF
                CREATE encryptedObject AS this.core.encryptObject(requestObject)
                RETURN {
                    secure: encryptedObject
                }
            END IF
            
            COMMENT: Not secure, return as-is
            RETURN requestObject
    END METHOD
    