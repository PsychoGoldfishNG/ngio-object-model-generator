    <%# EJS DOCUMENTATION: https://ejs.co/ %>
    COMMENT: ====================================================================================
    COMMENT: CUSTOM METHOD: unlock
    COMMENT: ====================================================================================
    
    COMMENT: Unlocks this medal for the current user.
    METHOD unlock(callback: Function, thisArg: Object)
        
        PURPOSE: Unlocks this medal and notifies the callback when complete
        
        PARAMETERS:
            callback: Function to call when the unlock completes
            thisArg: Context to use when calling the callback
        
        BEHAVIOR:
            COMMENT: Call the Medal.unlock component via core
            IF this.core is not null THEN
                CALL this.core.callComponent("Medal.unlock", { id: this.id }, FUNCTION onComplete(response)
                    CREATE result AS null
                    IF response is not null AND response.success is true THEN
                        SET result TO response.getResult()
                        SET this.unlocked TO true
                    END IF
                    
                    IF callback is defined THEN
                        CALL callback WITH context thisArg
                            PASSING this, result.medal_score
                    END IF
                END FUNCTION, thisArg)
            END IF
    END METHOD
    
    COMMENT: ====================================================================================
    COMMENT: SESSION MANAGEMENT METHOD
    COMMENT: ====================================================================================
    
    COMMENT: Clears session-specific data to return the medal to its unauthenticated state.
    METHOD clearSessionData()
        
        PURPOSE: Resets the medal to reflect only server-defined state, not user-specific unlock status
        
        WHY: Called by AppState.onSessionCleared() when the user's session expires or is cleared
        
        BEHAVIOR:
            SET this.unlocked TO false
    END METHOD
